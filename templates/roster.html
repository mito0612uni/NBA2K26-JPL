{% extends "layout.html" %}
{% block content %}
  <style>
    .action-forms button { font-size: 12px; padding: 2px 6px; margin-left: 5px; }
    .hidden-form { display: none; margin-top: 10px; background-color: #f9f9f9; padding: 10px; border-radius: 5px; }
  </style>

  <h2>ロスター管理</h2>
  
  <h3>チーム登録</h3>
  <form method="post" enctype="multipart/form-data">
    <div style="margin-bottom: 15px;">
      <input type="text" name="team_name" placeholder="チーム名" required>
      <select name="league" required>
          <option value="Aリーグ">Aリーグ</option>
          <option value="Bリーグ">Bリーグ</option>
      </select>
      <label for="logo_image">チームロゴ:</label>
      <input type="file" name="logo_image" id="logo_image" accept=".png, .jpg, .jpeg, .gif">
    </div>

    {# ★★★ ここからが抜けていた部分です ★★★ #}
    <h4>選手を同時に登録 (最大10名)</h4>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
      {% for i in range(1, 11) %}
        <input type="text" name="player_name_{{ i }}" placeholder="選手 {{ i }}">
      {% endfor %}
    </div>
    {# ★★★ ここまで ★★★ #}

    <button type="submit" name="action" value="add_team">チームと選手を登録</button>
  </form>

  <hr style="margin: 20px 0;">

  <h3>選手登録</h3>
  <form method="post">
    <input type="text" name="player_name" placeholder="選手名" required>
    <select name="team_id">
      {% for team in teams %}
        <option value="{{ team.id }}">{{ team.name }}</option>
      {% else %}
        <option>先にチームを登録してください</option>
      {% endfor %}
    </select>
    <button type="submit" name="action" value="add_player">選手を登録</button>
  </form>

  <hr style="margin: 30px 0;">

  <h3>管理者を追加</h3>
  <p>管理者に昇格させたい一般ユーザーの「ユーザー名」を正確に入力してください。</p>
  <form method="post">
    <input type="text" name="username_to_promote" placeholder="ユーザー名" required>
    <button type="submit" name="action" value="promote_user">管理者に昇格</button>
  </form>

  <hr style="margin: 30px 0;">

  <h2>登録済みリスト</h2>
  <script>
    function toggleForm(formId) {
      document.querySelectorAll('.hidden-form').forEach(form => {
        if (form.id !== formId) {